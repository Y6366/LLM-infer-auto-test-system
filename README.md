# LLM-infer-auto-test-system
用于针对大模型产品进行自动化测试平台

WHY？
当前平台预期解决哪些问题？
1、针对各类大模型产品可进行性能，精度相关指标测试，及相关数据展示。
2、针对同一模型部署在不同服务器类型进行硬件层面竞品测试，及相关数据展示。
3、压测自动化，提供针对大模型服务的压测自动化平台，并展示相关测试数据。

HOW？
系统整体设计逻辑：
基础设施建设阶段提供部分可复用性较强功能模块，中期提供完成业务流程功能，后期同其他系统进行功能交互融合。<br>

基础设施模块：<br>
1、环境配置模块<br>
2、日志文件管理模块<br>
3、工具管理模块<br>
4、模型管理模块<br>
5、数据展示模块<br>
6、画布工作流模块<br>


1、环境配置模块：<br>
预期：封装自动化linux环境配置，针对大模型执行所需的相关配套组件，提供指定版本的自动化环境部署。相关配套组件如：vllm, vllm_mindspore, mindspore_gs, msadapter, python, aisbench等。<br>

实施：<br>
页面提供针对服务器的增删改查操作，如，可添加服务器信息，罗列展示已添加服务器清单等。<br>
<br>
点击指定服务器图标后，顶端可提供已有镜像清单，此处数据可从指定镜像仓库获取。如已指定镜像切不再需要单独配置，则下方各配置项自动填充为该镜像内依赖版本信息，如需修改则可按需修改，如无待修改项，则直接使用即可。此模块需在画布工作流模块执行可视化调用。<br>
<br>
2、日志文件管理模块<br>
预期：提供日志解析功能，可在该模块内提供，<br>
测试工具日志文件样例，可标注关键数据含义，关键信息含义，用于数据展示模块调用展示。<br>
模型日志文件样例，可标注关键数据含义，关键信息含义，必要信息可用于数据展示模块调用展示。<br>
<br>
3、工具管理模块<br>
预期：提供测试工具管理可视化操作页面，可引入，管理各类测试工具，可指定工具位置，工具入参，工具执行后相关日志所在位置，可调用日志文件管理模块针对包含执行数据等日志文件进行关键数据获取过滤。<br>
<br>
4、模型管理模块<br>
预期：提供针对各类模型的调用执行设置，可在该模块内添加模型执行命令，各类候选参数，是否需重定向日志，如需重定向，可指定日志相对路径。<br>
<br>
5、数据展示模块<br>
预期：当前系统首页展示即为数据展示模块，该模块内提供常规数据汇总展示，竞品数据对比展示，压测数据展示。<br>
常规数据展示一：用于在选择指定版本场景后罗列展示所有看护数据，基于某一依赖版本信息作为筛选条件，以场景或用例维度进行数据汇总展示。<br>
常规数据展示二：以用例或场景为筛选条件，在不同版本配套维度进行某一指标的跨版本数据展示，可展示该指标在不同版本演进过程中的数据分布和变化趋势。<br>
常规数据展示三：针对各类测试工具执行后输出的各类测试数据，进行汇总展示。<br>
<br>
竞品数据展示：针对某一模型，同一测试工具，在不同显卡环境的相关性能数据进行对比展示。亦可生成相关竞品测试报告。<br>
<br>
压测数据展示：选择对应的压测记录，提供选择指定性能指标选项，以直方图，折线图，散点图等形式展示该指标在压测过程中数据部分及变化情况。<br>
<br>
6、画布工作流模块<br>
预期：形成可引入完整流程的的低代码平台，可拖拽环境配置模块，模型管理模块，工具管理模块内表示图标至画布内，通过箭头标识线连接，指定工作流执行顺序。<br>
