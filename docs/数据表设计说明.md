一、数据状态怎么分

强烈建议把生命周期状态与能力/开关/集成状态做“正交拆分”，不要把所有含义都堆在一个 status 字段里。

1) 生命周期（主状态，status）

适合绝大多数主数据/业务单据：
	•	DRAFT：草稿/未生效
	•	PENDING_REVIEW：待审核
	•	APPROVED / REJECTED：审核通过/驳回
	•	PUBLISHED：已发布（对外可见/对下游可用）
	•	ARCHIVED：归档（不可改，偶尔可看）
	•	DEPRECATED：不再推荐使用
	•	VOID / CANCELLED：作废/取消

注意：不要用 DELETED 作为生命周期值；删除用软删字段独立管理（见后文）。

2) 能力/开关（enable/disable）
	•	is_enabled（或 enabled）：启用/停用开关，独立于主状态。例如物料停用但仍处于已发布态。

3) 软删除（soft delete）
	•	is_deleted + deleted_at + deleted_by：标识逻辑删除与删除人/时间。
查询必须统一加 is_deleted = 0 的全局条件。

4) 时间有效性（temporal）
	•	effective_from / effective_to：版本随时间生效/失效。适合价目表、策略、合约等。

5) 集成/同步状态（与外部系统交互时单独维护）
	•	sync_status：PENDING / SUCCESS / FAILED / RETRYING
	•	last_sync_at / sync_error（短文案）/ source_system / source_id

6) 安全/运行态（可选，按需）
	•	locked / locked_by / locked_at：对象级加锁（编辑占用）
	•	risk_status：NORMAL / SUSPICIOUS / QUARANTINED
	•	quality_status：RAW / VALIDATED / ENRICHED

以上字段不一定都要，但划清职责边界：生命周期只放生命周期；开关单独放；软删单独放；同步单独放。



二、维护与审计字段清单（强烈推荐）

最小必备“审计四件套+软删六件套+并发三件套”：
	•	主键：id（建议 BIGINT 雪花/ULID 或 CHAR(36) UUID）
	•	多租户/域：tenant_id / org_id（需要多租户就加）
	•	审计四件套：created_by，created_at，updated_by，updated_at
	•	软删六件套：is_deleted，deleted_by，deleted_at（其余三件已含于审计/主键/租户）
	•	并发控制：version（INT，乐观锁），或 row_etag（随机/哈希）
	•	生命周期：status（见上一节）
	•	开关：is_enabled
	•	时间有效性：effective_from，effective_to
	•	集成与溯源：source_system，source_id，import_batch_no，last_sync_at，sync_status，sync_error
	•	追踪与调试：trace_id（链路追踪），req_id（请求ID）
	•	数据质量/校验：checksum（行级哈希），schema_version
	•	可扩展：ext（JSON，存放低频/灰度字段，替代“reserve1/2/3”这类不透明字段）
	•	快速备注（可选）：remark（短文本，≤512）

索引建议：
	•	(tenant_id, id) 复合主索引（多租户）
	•	idx_is_deleted，idx_status，idx_effective_to，idx_source_id，idx_last_sync_at

命名&时间：
	•	全库统一 UTC 时间；应用层负责时区展示
	•	命名统一下划线小写；布尔字段用 is_ 前缀


三、“系统备注字段”要不要保留？

要，但只放短注释，别放“累计维护历史”。
	•	remark 用于最后一次操作的简要说明（≤512 chars），例如“因客户投诉修改联系人”。
	•	累计信息/历史记录必须进“明细表/日志表”做追加式保存，保证可追溯、可审计、可搜索。

推荐两个配套表：
	1.	变更审计表（不可修改，追加式）
	•	entity_id，op_type（CREATE/UPDATE/DELETE/APPROVE/…）
	•	op_by，op_at，op_reason（短文案）
	•	changed_fields（JSON：字段→旧/新），必要时存 old_snapshot/new_snapshot（JSON）
	2.	备注明细表（可多条，可置顶）
	•	id，entity_id，note_type（SYSTEM/USER）
	•	content（TEXT），pinned（置顶），created_by，created_at

这样既保留“可快速查看的当下备注”，又保留“累积可审计的历史”。


